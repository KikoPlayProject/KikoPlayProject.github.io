---
layout: post
title: "KikoPlay 0.9.0"
date:   2022-05-15 00:00:00
categories: newVersion
type: newVer
---

结合群友的反馈，以及我自己日常使用，还是发现了不少可以优化的地方。居家办公两个多月以来，抽时间更新了KikoPlay。本次由0.8.2升级到0.9.0，一般来说，如果版本号第二个数字发生变化，表明会有较多的修改。 

本次更新的内容包括：

 - #### 新增深色模式
   Mac等平台会有系统级别的深色模式，由于KikoPlay界面的部分Widget使用了系统配色（比如对话框的文本框背景），开启深色模式后表现比较糟糕，因此这一版自带了深色模式，在 设置->外观 中开启（感觉深色模式更好看hhhh
 - #### 弹幕和资料库加载优化
   优化了弹幕纹理的生成过程，和之前相比一张纹理图可以包含更多弹幕，因此渲染会更高效一些 

   资料库加载也做了优化，现在内存占用会更少（我也才发现有人会添加几千个条目
 - #### 资料库升级：支持直接编辑资料、人物；资料库支持批量操作
   现在你可以不依赖任何脚本，直接向资料库添加条目并编辑所有信息，对于某些特殊条目可能有用 

   资料库还增加了批量模式（右键菜单可见），可以批量更新或者删除条目
 - #### 下载支持订阅Tracker源
   可自动从Tracker源更新Tracker List，添加新的下载任务后KikoPlay会自动增加这些Tracker
 - #### 脚本系统更新
   新增正则表达式API，封装Qt的QRegularExpression，提供了更高级的正则表达式功能（感谢CL-Jeremy） 

   新增用于调试的api `kiko.viewtable`，可以直接查看tabel的内容 

   新增脚本右键菜单入口，支持在脚本列表中的右键菜单增加项目

   新增脚本测试场，可以直接测试KikoPlay的各种API（个人感觉比较有用，非常方便
 - #### 局域网服务优化，QHttpEngine改为QtWebApp
   QHttpEngine很久没有更新了，这次将局域网服务的http server换成QtWebApp，顺便解决了长视频跳转失败的bug
 - #### 支持加载和导出bilibili的xml屏蔽规则
   KikoPlay的屏蔽规则和bilibili的不太一样，之前并不打算支持，不过发现有用户还是会有这个需求，这一版就加上了，不过导出的话并不能保留KikoPlay屏蔽规则的一些特有功能
 - #### 其他更新
   其他更新还包括mpv按键直传支持按键映射、支持多个番组日历、本地弹幕加载优化、其他bug修复等等

KikoPlay未来还会继续完善（写下这些内容的时候，已经有一些确定会在0.9.1增加的功能了hhh），一如既往地希望能有更多人参与到KikoPlay项目中